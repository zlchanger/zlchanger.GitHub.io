---
layout: post
title: cron表达式
date: 2023/03/06
categories: blog
tags: [杂谈]
description: 定时任务的时间表达式【corn表达式】的详细解读

---

## 1、什么是corn表达式

Cron表达式是一个表达时间含义的字符串，由6-7个域结合，域之间通过空格隔开，每个域可以有多个值，也可以是单值，或者特殊逻辑字符。最后一个域【年】非必须。

## 2、域含义以及取值

Cron表达式的格式大致为 X(second) X(minute) X(hour) X(day) X(month) X(week) X(year),每一段分别代表 秒、分、时、天、月、周、年。

|  域  | 取值范围 | 包含的特殊符号 |
|:---:| :---------: | :----: |
|  秒  | \[0,59] | * , - / |
|  分  | \[0,59] | * , - / |
|  时  | \[0,23] | * , - / |
|  天  | \[1,31] | * , - / ? L W |
|  月  | \[1,12]或者\[JAN、DEC] | * , - / |
|  周  | \[1,7]或者\[MON、SUN] | * , - / ? L # |
|  年  | --- | * , - / |


## 3、特殊字符含义

| 特殊字符 |                                        含义                                         |
|:----:|:---------------------------------------------------------------------------------:|
|  *   |                                    包含所有取值范围的值                                     |
|  ,   |                                    列出取值枚举，用来分隔                                    |
|  -   |                                    取值区间，从什么到什么                                    |
|  /   |                                      取值周期增量                                       |
|  ?   |           不指定值，仅日期和星期域支持该字符，当日期或星期域其中之一被指定了值以后，为了避免冲突，需要将另一个域的值设为?    |
|  L   |                          单词Last的首字母，表示最后一天，仅日期和星期域支持该字符                           |
|  W   |   除周末以外的有效工作日，在离指定日期的最近的有效工作日触发事件。W字符寻找最近有效工作日时不会跨过当前月份，连用字符LW时表示为指定月份的最后一个工作日    |
|  #   |                               确定每个月第几个星期几，仅星期域支持该字符                               |

## 4、常用表达式

- 0/2 * * * * ?   表示每2秒 执行任务
- 0 0/2 * * * ?    表示每2分钟 执行任务
- 0 0 2 1 * ?   表示在每月的1日的凌晨2点调整任务
- 0 15 10 ? * MON-FRI   表示周一到周五每天上午10:15执行作业
- 0 15 10 ? 6L 2002-2006   表示2002-2006年的每个月的最后一个星期五上午10:15执行作
- 0 0 10,14,16 * * ?   每天上午10点，下午2点，4点
- 0 0/30 9-17 * * ?   朝九晚五工作时间内每半小时
- 0 0 12 ? * WED    表示每个星期三中午12点
- 0 0 12 * * ?   每天中午12点触发
- 0 * 14 * * ?     在每天下午2点到下午2:59期间的每1分钟触发
- 0 0/5 14 * * ?    在每天下午2点到下午2:55期间的每5分钟触发
- 0 0/5 14,18 * * ?     在每天下午2点到2:55期间和下午6点到6:55期间的每5分钟触发
- 0 0-5 14 * * ?    在每天下午2点到下午2:05期间的每1分钟触发
- 0 10,44 14 ? 3 WED    每年三月的星期三的下午2:10和2:44触发 
- 0 15 10 ? * MON-FRI    周一至周五的上午10:15触发
- 0 15 10 L * ?    每月最后一日的上午10:15触发
- 0 15 10 ? * 6L    每月的最后一个星期五上午10:15触发
- 0 15 10 ? * 6L 2002-2005   2002年至2005年的每月的最后一个星期五上午10:15触发
- 0 15 10 ? * 6#3   每月的第三个星期五上午10:15触发
